{% extends "base.html" %}

{% block title %}Wiki - List{% endblock %}

{% block content %}

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>
            Pages
            
        </h1>
        
        <a href="{% url 'wiki:page_create' %}" class="btn btn-primary">
            New Page
            
        </a>
        
    </div>

    {% for item in page_obj %}
    <div class="card mb-3">
        <div class="card-body">
            {% if app_type == 'blog' %}
            <h5 class="card-title">
                <a href="{% url 'wiki:post_detail' item.slug %}" class="text-decoration-none">{{ item.title }}</a>
            </h5>
            <p class="card-text">{{ item.excerpt|default:item.content|truncatewords:20 }}</p>
            <small class="text-muted">
                By {{ item.author.username }} • {{ item.published_at|date:"M d, Y" }}
                {% if item.category %} • {{ item.category.name }}{% endif %}
            </small>
            {% elif app_type == 'wiki' %}
            <h5 class="card-title">
                <a href="{% url 'wiki:page_detail' item.slug %}" class="text-decoration-none">{{ item.title }}</a>
            </h5>
            <p class="card-text">{{ item.content|truncatewords:20 }}</p>
            <small class="text-muted">
                By {{ item.author.username }} • {{ item.updated_at|date:"M d, Y" }}
                {% if item.category %} • {{ item.category.name }}{% endif %}
            </small>
            {% elif app_type == 'shop' %}
            <h5 class="card-title">
                <a href="{% url 'wiki:product_detail' item.slug %}" class="text-decoration-none">{{ item.name }}</a>
            </h5>
            <p class="card-text">{{ item.description|truncatewords:20 }}</p>
            <div class="d-flex justify-content-between align-items-center">
                <span class="h5 mb-0 text-primary">${{ item.price }}</span>
                <small class="text-muted">{{ item.category.name }}</small>
            </div>
            {% else %}
            <h5 class="card-title">{{ item.name|default:item.title }}</h5>
            <p class="card-text">{{ item.description|default:item.content|truncatewords:20 }}</p>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <div class="text-center py-5">
        <p class="text-muted">No items found.</p>
    </div>
    {% endfor %}
</div>


{% endblock %}
